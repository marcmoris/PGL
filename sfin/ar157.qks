;/T/ Consultation des utilisateurs 
;
;/P/ Programmeur..: Patrick Langlois
;    Date Création: 24 Août 1999
;
;    Description..: Permet de visionner et de choisir un utilisateur
;
;                   UTLCLE ==> - segment de la clé de recherche.
;                              - peut contenir le caractère '@'.
;                              - contient la valeur de retour.
;
;/V/ Écran vérifier pour le passage à l'an 2000


SCREEN ar157 NOMODE NOACTION FIELDMARK &
             FROM 11,18 TO 23,80 &
             HELP POPUP FROM 4,9 TO 20,72 &
             ACTIVITIES FIND &
             RECEIVING  T_UTLCLE 


USE ustrasse NOLIST

USE ussectmp NOLIST
    "AR157"

USE ar157.hlp NOLIST

TEMPORARY T_UTLCLE CHARACTER SIZE 10; Code d'utilisteur

;-------------------------------------------------------------------------------
;
FILE ARUTILISATEUR PRIMARY   &
                   OPEN READ &
                   OCCURS 10

 ACCESS   VIA     UTLCLE   &
          USING   T_UTLCLE &
          ORDERBY UTLCLE

;-------------------------------------------------------------------------------
;

USE ushilite NOLIST

DRAW 1,1 TO 13,63

SKIP 1

USE ustitoff NOLIST           ; Pour placer le TITLE OFF

@IF FRANCAIS
    TITLE "Code        Nom                  Prénom" AT 2,6
@ELSE
   TITLE "%%%" AT 2,6
@ENDIF


ALIGN(3,3,6)(,,18)(,,39) 

CLUSTER OCCURS WITH ARUTILISATEUR

FIELD UTLCLE    OF ARUTILISATEUR HIDDEN LABEL ">>"
FIELD UTLNOM    OF ARUTILISATEUR
FIELD UTLPNM    OF ARUTILISATEUR 

CLUSTER

;-------------------------------------------------------------------------------
;
; Valide la sécurité d'accès pour l'écran par son code.
;
;
PROCEDURE INITIALIZE
BEGIN
  USE ussececr NOLIST
END

;-------------------------------------------------------------------------------
;
; Enleve le @ si l'usager fait aucun choix à l'écran.
;
;
PROCEDURE EXIT
BEGIN
  IF 0 <> IND(T_UTLCLE, "@")
  THEN LET T_UTLCLE = ""
END

;-------------------------------------------------------------------------------
;
; Retourne la valeur choisie par l'usager.
;
;
PROCEDURE DESIGNER 1
BEGIN
  LET T_UTLCLE = UTLCLE OF ARUTILISATEUR
  RETURN
END

BUILD
@IF FORMAT
                 ***************************************************************
                 *    Code        Nom                  Prénom                  *
                 * >> xxxxxxxxxx  xxxxxxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxxxxxx    *
                 * >> xxxxxxxxxx  xxxxxxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxxxxxx    *
                 * >> xxxxxxxxxx  xxxxxxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxxxxxx    *
                 * >> xxxxxxxxxx  xxxxxxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxxxxxx    *
                 * >> xxxxxxxxxx  xxxxxxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxxxxxx    *
                 * >> xxxxxxxxxx  xxxxxxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxxxxxx    *
                 * >> xxxxxxxxxx  xxxxxxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxxxxxx    *
                 * >> xxxxxxxxxx  xxxxxxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxxxxxx    *
                 * >> xxxxxxxxxx  xxxxxxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxxxxxx    *
                 * >> xxxxxxxxxx  xxxxxxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxxxxxx    *
                 ***************************************************************
  
@ENDIF
