;/T/ Consultation des comptes de Banque CIECLE,LBQCPTENC
;
;/P/ Programmeur..: Thomas BRENNEUR
;    Date Création: 20-Mai-1993
;
;    Description..: Permet de visionner et de choisir un compte de banque
;

;/V/ Écran vérifier pour le passage à l'an 2000

;
SCREEN mc110 NOMODE NOACTION FIELDMARK &
             FROM 11,40 TO 23,80 &
             HELP POPUP FROM 4,9 TO 20,72 &
             ACTIVITIES FIND &
             RECEIVING  T_CIECLE, &
                        T_LBQCPTENC

;
; Pour ne pas fermer la transaction de l'écran qui appelle le pop-up (610)
;
@IF VAXVMS
TRANSACTION QUERY COMMIT ON MODE
@ENDIF

USE ussectmp NOLIST
    "MC110"

USE mc101.hlp NOLIST

;-------------------------------------------------------------------------------

TEMPORARY T_CIECLE    CHARACTER SIZE 4 ; Compagnie
TEMPORARY T_LBQCPTENC CHARACTER SIZE 6 ; Compte d'encaisse

;-------------------------------------------------------------------------------

FILE MCLIVRET_BQ  PRIMARY &
                  OCCURS 11

  ACCESS  VIA   CIECLE, &
                LBQCPTENC &
          USING T_CIECLE, &
                T_LBQCPTENC

;-------------------------------------------------------------------------------

FILE VCPT_DSC     REFERENCE &
                  OCCURS WITH MCLIVRET_BQ

  ACCESS  VIA   CPTCLE &
          USING LBQCPTENC OF MCLIVRET_BQ

;-------------------------------------------------------------------------------

USE ushilite  NOLIST
USE usdrwfnd  NOLIST
USE ustitoff NOLIST

SKIP 1

ALIGN(3,3,6)(,,13)

CLUSTER OCCURS WITH MCLIVRET_BQ

FIELD LBQCPTENC OF MCLIVRET_BQ &
      HIDDEN &
      LABEL ">>"

FIELD CPTDSCABR OF VCPT_DSC &
      DISPLAY

CLUSTER

;-------------------------------------------------------------------------------
;
; Valide la sécurité d'accès pour l'écran par son code.
;
PROCEDURE INITIALIZE
BEGIN
  USE ussececr NOLIST
END

PROCEDURE EXIT
BEGIN
  IF 0 <> INDEX(T_LBQCPTENC, "@")
  THEN LET T_LBQCPTENC = ""
END

PROCEDURE DESIGNER 1
BEGIN
  LET T_LBQCPTENC = LBQCPTENC OF MCLIVRET_BQ
  RETURN
END

BUILD
