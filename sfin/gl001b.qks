;/T/ Ecriture comptable
;
;/P/ Programmeur..: Alain Côté
;    Date Création: 11 mars 1992
;
;    Description..: Consultation des ventilation comptable généré par le
;                   traitement d'une journalisation.
;
;
;
;-------------------------------------------------------------------------------

;/V/ Écran vérifier pour le passage à l'an 2000


SCREEN gl001b ACTIONBAR &
              MODE LABEL "" AT 2,80 &
              NOACTION FIELDMARK &
              HELP POPUP FROM 4,9 TO 20,72 &
              ACTIVITIES FIND &
              RECEIVING T_CIECLEMNU, &
                        T_CIENOM   , &
                        T_FLGMNU   , &
                        GLECRITURE_JG

USE ussectmp NOLIST     ; Variable pour la securite
    "GL001B"

USE gl001b.hlp NOLIST

USE usactecr NOLIST     ; Actionbar standard dans les écrans pleine
                        ; page et sous-ecran

USE ustrasse NOLIST ; Transaction QUERY pour les sous-écrans

TEMPORARY T_CIECLEMNU CHARACTER SIZE 4 ; Compagnie de transaction
TEMPORARY T_CIENOM    CHARACTER SIZE 40; Compagnie de transaction
TEMPORARY T_FLGMNU    CHARACTER SIZE 1 ; Identifie le menu d'origine.

;-------------------------------------------------------------------------------
;
FILE GLECRITURE_JG    MASTER

;
; Détail de l'écriture.
;
FILE MCHIS_ECR        PRIMARY &
                      OCCURS 16 &
                      NOITEM
  ACCESS VIA HISCLE &
         USING HISCLE OF GLECRITURE_JG

;
; Affiche la description du compte.
;
FILE VCPT_DSC         REFERENCE
  ACCESS VIA CPTCLE &
         USING CPTCLE OF MCHIS_ECR


;-------------------------------------------------------------------------------
;
; Numéro et nom de la compagnie pour l'en-tête de l'écran.
;
DEFINE DZ_CIECLE CHARACTER SIZE  4 = T_CIECLEMNU      IF T_FLGMNU = "C"
DEFINE DZ_CIENOM CHARACTER SIZE 40 = CENTER(T_CIENOM)

;-------------------------------------------------------------------------------
;
USE usdrwecr NOLIST
USE ustitstd NOLIST
USE ushilite NOLIST


SKIP
TITLE &
@IF FRANCAIS
 " Ecritures comptables " &
@ELSE
 " Accounting Entry " &
@ENDIF
      CENTERED AT ,1

USE ustitoff NOLIST           ; Pour placer le TITLE OFF

SKIP TO 4

ALIGN(,3,19)(,,28)(,,30)
FIELD ECJCLENUM OF GLECRITURE_JG FIXED
FIELD ECJCLESEQ OF GLECRITURE_JG FIXED

FIELD ECJDSC1   OF GLECRITURE_JG FIXED

SKIP 1

TITLE &
@IF FRANCAIS
    "Compte Description          Cie  Unité          $ débit       $ crédit" &
@ELSE
    "Acc.   Description          Co.  Unit           $ debit       $ credit" &
@ENDIF
      AT ,3

SKIP

ALIGN(3,2,3)(,,10)(,,31)(,,36)(,,45)(,,60)
CLUSTER OCCURS WITH MCHIS_ECR

FIELD CPTCLE    OF MCHIS_ECR ID 01 HIDDEN LABEL " "

FIELD CPTDSCABR OF VCPT_DSC

FIELD CIECLE    OF MCHIS_ECR

FIELD UNACLE    OF MCHIS_ECR

FIELD HECMNTDBT OF MCHIS_ECR &
        BWZ

FIELD HECMNTCRT OF MCHIS_ECR &
        BWZ

CLUSTER


;-------------------------------------------------------------------------------
;
;
; Valide la sécurité d'accès de l'écran.
;
;
PROCEDURE INITIALIZE
BEGIN
  USE ussececr NOLIST
END

BUILD ;
;xxxx                xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx                   x
;***************************** Ecritures comptables *****************************
;* No écriture...: xxxxxxxx xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx          *
;*                                                                              *
;* Compte Description          Cie  Unité          $ débit       $ crédit       *
;* xxxxxx xxxxxxxxxxxxxxxxxxxx xxxx xxxxxxxx xxxxxxxxxxxxx  xxxxxxxxxxxxx       *
;* xxxxxx xxxxxxxxxxxxxxxxxxxx xxxx xxxxxxxx xxxxxxxxxxxxx  xxxxxxxxxxxxx       *
;* xxxxxx xxxxxxxxxxxxxxxxxxxx xxxx xxxxxxxx xxxxxxxxxxxxx  xxxxxxxxxxxxx       *
;* xxxxxx xxxxxxxxxxxxxxxxxxxx xxxx xxxxxxxx xxxxxxxxxxxxx  xxxxxxxxxxxxx       *
;* xxxxxx xxxxxxxxxxxxxxxxxxxx xxxx xxxxxxxx xxxxxxxxxxxxx  xxxxxxxxxxxxx       *
;* xxxxxx xxxxxxxxxxxxxxxxxxxx xxxx xxxxxxxx xxxxxxxxxxxxx  xxxxxxxxxxxxx       *
;* xxxxxx xxxxxxxxxxxxxxxxxxxx xxxx xxxxxxxx xxxxxxxxxxxxx  xxxxxxxxxxxxx       *
;* xxxxxx xxxxxxxxxxxxxxxxxxxx xxxx xxxxxxxx xxxxxxxxxxxxx  xxxxxxxxxxxxx       *
;* xxxxxx xxxxxxxxxxxxxxxxxxxx xxxx xxxxxxxx xxxxxxxxxxxxx  xxxxxxxxxxxxx       *
;* xxxxxx xxxxxxxxxxxxxxxxxxxx xxxx xxxxxxxx xxxxxxxxxxxxx  xxxxxxxxxxxxx       *
;* xxxxxx xxxxxxxxxxxxxxxxxxxx xxxx xxxxxxxx xxxxxxxxxxxxx  xxxxxxxxxxxxx       *
;* xxxxxx xxxxxxxxxxxxxxxxxxxx xxxx xxxxxxxx xxxxxxxxxxxxx  xxxxxxxxxxxxx       *
;* xxxxxx xxxxxxxxxxxxxxxxxxxx xxxx xxxxxxxx xxxxxxxxxxxxx  xxxxxxxxxxxxx       *
;* xxxxxx xxxxxxxxxxxxxxxxxxxx xxxx xxxxxxxx xxxxxxxxxxxxx  xxxxxxxxxxxxx       *
;* xxxxxx xxxxxxxxxxxxxxxxxxxx xxxx xxxxxxxx xxxxxxxxxxxxx  xxxxxxxxxxxxx       *
;* xxxxxx xxxxxxxxxxxxxxxxxxxx xxxx xxxxxxxx xxxxxxxxxxxxx  xxxxxxxxxxxxx       *
;********************************************************************************
