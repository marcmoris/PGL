;/T/ Consultation charte de bloc 
;
;/P/ Programmeur..: Francois Richard
;    Date Creation: 28 octobre 1999
;
;    Description..: Permet de visionner et de choisir une charte de bloc
;
;    Parametres...: T_CIECLE        = Compagnie
;                   T_IFCCLE        = Charte de bloc
;-------------------------------------------------------------------------------

SCREEN if113 NOMODE NOACTION FIELDMARK &
             FROM 5,60 TO 23,80 &
             ACTIVITIES FIND &
             RECEIVING  T_CIECLE, &
                        T_IFCCLE

USE ustrasse NOLIST

USE ussectmp NOLIST
    "IF113"

;USE if113.hlp NOLIST

;-------------------------------------------------------------------------------

TEMPORARY T_CIECLE       CHARACTER SIZE 4 RESET AT STARTUP
TEMPORARY T_IFCCLE       CHARACTER SIZE 2 RESET AT STARTUP

;-------------------------------------------------------------------------------

FILE IFCHARTE PRIMARY OCCURS 16

  ACCESS  VIA     CIECLE,   &
                  IFCCLE    &
          USING   T_CIECLE, &
                  T_IFCCLE  &
          ORDERBY IFCCLE

;-------------------------------------------------------------------------------

USE ushilite NOLIST
DRAW 1,1 TO 19,21
USE ustitoff NOLIST

SKIP 1

SKIP

TITLE "Code" AT ,5
TITLE "Date" AT ,12

ALIGN (2,3,6)(,,12)

CLUSTER OCCURS WITH IFCHARTE

FIELD IFCCLE OF IFCHARTE &
      DISPLAY            &
      HIDDEN             &
      LABEL ">>"

FIELD IFCDAT OF IFCHARTE &
      FORMAT YYYYMM      & 
      DISPLAY

CLUSTER

;-------------------------------------------------------------------------------
;
; Valide la sécurité d'accès pour l'écran par son code.
;
;
PROCEDURE INITIALIZE
BEGIN
  USE ussececr NOLIST
END

PROCEDURE EXIT
BEGIN
  IF 0 <> IND(T_IFCCLE, "@")
  THEN LET T_IFCCLE = ""
END

PROCEDURE DESIGNER 1
BEGIN
  LET T_IFCCLE = IFCCLE OF IFCHARTE
  RETURN
END

BUILD

