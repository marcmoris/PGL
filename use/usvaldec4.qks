; Valide la partie décimale (float)
;
; Description: Le traitement suivant valide que le nombre de décimaux ne
;              soit pas dépassés pour les montants de type FLOAT.
;
; Utilisation: Doit être utilisé dans la procédure EDIT du champ visé.
;              Sert peut importe l'input scale.
;
; Exemple : Nombre entré   : 123.1234-
;           Fieldtext      : -123.1234
;           Nb. de Décimal : 4
;
;           Nombre entré   : -123.1234
;           Fieldtext      : -123.1234
;           Nb de Décimal  : 4
;

IF 0 <> INDEX(FIELDTEXT,".")
THEN BEGIN
  ;
  ; Si on a un - ou un + à la fin du nombre, il faut modifié le fieldtext
  ; pour envoyé le signe en avant de celui-ci pour que notre validation
  ; fonctionne.
  ;
  IF    "-" = FIELDTEXT[SIZE(FIELDTEXT):1] &
     OR "+" = FIELDTEXT[SIZE(FIELDTEXT):1]
  THEN LET FIELDTEXT = FIELDTEXT[SIZE(FIELDTEXT):1] + &
                       FIELDTEXT[1:SIZE(FIELDTEXT)-1]
  ;
  ; On calcul le nombre de décimal
  ;
  IF 4 < SIZE( TRUNCATE( FIELDTEXT ) ) - INDEX( FIELDTEXT,"." )
  THEN ERROR 15 ; "Il y a trop de position décimal"
END

;
;**FIN USVALDEC4
