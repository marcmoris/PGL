; Valide la partie décimale (float)
;
; Description: Le traitement suivant valide que le nombre de décimaux ne
;              soit pas dépassés pour les montants de type FLOAT. Cela
;              fonctionne seulement si le montant est conservé sous un
;              nombre entier(INTEGER), c-a-d. un point logique.
;
; Utilisation: Doit être utilisé dans la procédure EDIT du champ visé.
;              Sert peut importe l'input scale.
;
; Exemple : Nombre entré   : 123-
;           Fieldtext      : -123
;           Nb. de Décimal : 0
;
;           Nombre entré   : -123
;           Fieldtext      : -123
;           Nb de Décimal  : 0
;
;
IF 0 <> INDEX(FIELDTEXT,".")
THEN BEGIN
  ;
  ; Si on a un - ou un + à la fin du nombre, il faut modifié le fieldtext
  ; pour envoyé le signe en avant de celui-ci pour que notre validation
  ; fonctionne.
  ;
  IF    "-" = FIELDTEXT[SIZE(FIELDTEXT):1] &
     OR "+" = FIELDTEXT[SIZE(FIELDTEXT):1]
  THEN LET FIELDTEXT = FIELDTEXT[SIZE(FIELDTEXT):1] + &
                       FIELDTEXT[1:SIZE(FIELDTEXT)-1]
  ;
  ; On calcul le nombre de décimal
  ;
  IF 0 < SIZE( TRUNCATE( FIELDTEXT ) ) - INDEX( FIELDTEXT,"." )
  THEN ERROR 15 ; "Il y a trop de position décimal"
END

;
;**FIN USVALDEC
